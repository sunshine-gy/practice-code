<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    从用户输入URL到页面展示，中间发生了什么

    1.用户输入关键词，地址栏判断是搜索内容还是url地址。如果是搜索内容，会使用浏览器默认搜索引擎加上搜索内容合成url；
       如果是域名会加上协议（如https）合成完整的url

    2.浏览器进程会将URL请求发送到网络进程，网络进程会查找本地缓存是否缓存了该资源。如果有缓存资源，
      那么直接返回资源给浏览器进程；如果在缓存中没有查找到资源，那么直接进入网络请求流程。这请求前的第一步
      是要进行 DNS 解析，以获取请求域名的服务器 IP 地址，之后进行TCP连接。

    3.服务器接收到请求信息后，会根据请求信息生成响应数据，并发给网络进程。网络进程开始解析响应头，如果发现
      返回的状态码是301 或者 302，那么说明服务器需要浏览器重定向到其他 URL。这时网络进程会从响应头的Location字段
      里面读取重定向的地址，然后再发起新的 HTTP 或者 HTTPS 请求，一切又重头开始了。

    4.服务器响应 URL 请求之后，浏览器进程就又要开始准备渲染进程了；渲染进程准备好之后，需要先向渲染进程提交页面数据，
      我们称之为提交文档阶段。(“提交文档”的消息是由浏览器进程发出的，渲染进程接收到“提交文档”的消息后，会
      和网络进程建立传输数据的“管道”。等文档数据传输完成之后，渲染进程会返回“确认提交”的消息给浏览器进程)

    5.渲染进程接收完文档信息之后，便开始解析页面和加载子资源，完成页面的渲染。

    6.这其中，用户发出 URL 请求到页面开始解析的这个过程，就叫做导航。

    
    补充：内容分发网络(CDN)

    CDN 是将源站内容分发至全国所有的节点，从而缩短用户查看对象的延迟，提高用户访问网站的响应速度与网站的可用性的技术。
    它能够有效解决网络带宽小、用户访问量大、网点分布不均等问题。

    原理：应用CDN后，DNS 返回的不再是 IP 地址，而是一个CNAME(Canonical Name ) 别名记录，指向CDN的全局负载均衡，
    由于没有返回IP地址，于是本地DNS会向负载均衡系统再发送请求，则进入到CDN的全局负载均衡系统进行智能调度：
    1.看用户的 IP 地址，查表得知地理位置，找相对最近的边缘节点
    2.看用户所在的运营商网络，找相同网络的边缘节点
    3.检查边缘节点的负载情况，找负载较轻的节点
    4.其他，比如节点的“健康状况”、服务能力、带宽、响应时间等
    结合上面的因素，得到最合适的边缘节点，然后把这个节点返回给用户，用户就能够就近访问CDN的缓存代理
</body>
</html>