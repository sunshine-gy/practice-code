<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    V8执行一段代码的流程：
    源代码 -> AST -> 字节码 -> 执行

    1.将源代码转换为抽象语法树(AST)，并生成执行上下文。AST 是非常重要的一种数据结构，AST 的结构和代码的结构
    非常相似，其实你也可以把 AST 看成代码的结构化的表示，编译器或者解释器后续的工作都需要依赖于 AST，而不是源代码。

    2.解释器 Ignition 就登场了，它会根据 AST生成字节码，并解释执行字节码。字节码就是介于 AST 和机器码之间的一种
    代码。但是与特定类型的机器码无关，字节码需要通过解释器将其转换为机器码后才能执行。

    3.生成字节码之后，接下来就要进入执行阶段了，如果有一段第一次执行的字节码，解释器 Ignition 会逐条解释执行。
    在执行字节码的过程中，如果发现有热点代码（HotSpot），比如一段代码被重复执行多次，这种就称为热点代码，那么后台
    的编译器 TurboFan 就会把该段热点的字节码编译为高效的机器码，然后当再次执行这段被优化的代码时，只需要执行编译后
    的机器码就可以了，这样就大大提升了代码的执行效率

    补充：
    即时编译：在 V8 中，就是指解释器 Ignition 在解释执行字节码的同时，收集代码信息，当它发现某一部分代码变热了
    之后，TurboFan 编译器便闪亮登场，把热点的字节码转换为机器码，并把转换后的机器码保存起来，以备下次使用。

    怎么理解 V8 执行时间越久，执行效率越高”这个性质的？
    答：V8执行时间越久，越容易发现热点代码，执行转换为机器码的代码，自然执行效率会越高。
</body>
</html>